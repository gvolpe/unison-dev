namespace com.gvolpe.demo

deploy : '{IO, Exception} URI
deploy = Cloud.main do
  serviceHash = deployHttp !env logic
  serviceName = ServiceName.named "demo"
  ServiceName.assign serviceName serviceHash

env : '{Exception, Cloud} Environment
env = do Environment.named "demo"

logic : HttpRequest ->{Exception, Log} HttpResponse
logic = Route.run do
  name = Route.route GET Parser.text
  info "Greeting request for ðŸ‘‡" [("name", name)]
  ok.text ("Hello, " ++ name ++ "! ðŸ‘‹ \n")
